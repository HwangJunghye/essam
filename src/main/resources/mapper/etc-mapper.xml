<?xml version="1.0" encoding="UTF-8"?>
<!-- mapper(sql문) 작성 -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.essam.www.etc.IEtcDao">
	
	<!-- 필터를 "신규"로 선택했을 때 -->
	<select id="getNewStatistic" resultType="Map">
		SELECT COUNT(*) FROM 
		<!--searchTarget이 클래스인 경우 -->
		<if test="searchTarget.equals('class')">
		CLASS WHERE CLSOPENDATE BETWEEN {startDate} AND {endDate} GROUP BY CLSOPENDATE ORDER BY CLSOPENDATE
		</if>
		
		<!-- searchTarget이 강사인 경우 -->
		<if test="searchTarget.equals('teacher')">
		MEMBER WHERE (MBTYPE=2) AND (MBJOINDATE BETWEEN {startDate} AND {endDate}) GROUP BY MBJOINDATE ORDER BY MBJOINDATE
		</if>
		
		<!-- searchTarget이 학생인 경우 -->
		<if test="searchTarget.equals('student')">
		MEMBER WHERE (MBTYPE=1) AND (MBJOINDATE BETWEEN {startDate} AND {endDate}) GROUP BY MBJOINDATE ORDER BY MBJOINDATE
		</if>
	</select>
	
	
	<!-- 필터를 "전체"로 선택했을 때 -->
	<select id="getTotalStatistic" resultType="Map">
		SELECT COUNT(*) FROM 
		<!--searchTarget이 클래스인 경우 -->
		<if test="searchTarget.equals('class')">
		CLASS WHERE  GROUP BY 
		</if>
		
		<!-- searchTarget이 강사인 경우 -->
		<if test="searchTarget.equals('teacher')">
		MEMBER WHERE (MBTYPE=2) AND  GROUP BY 
		</if>
		<!-- searchTarget이 학생인 경우 -->
		<if test="searchTarget.equals('student')">
		MEMBER WHERE (MBTYPE=1) AND  GROUP BY 
		</if>
	</select>
	
</mapper>